<!DOCTYPE html>
<html lang="th">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Mini Shop - Map Integrated</title>
Â  Â Â 
Â  Â  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary-color: #667eea;
Â  Â  Â  Â  Â  Â  --secondary-color: #764ba2;
Â  Â  Â  Â  Â  Â  --bg-color: #f8f9fa;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {Â 
Â  Â  Â  Â  Â  Â  font-family: 'Prompt', sans-serif;Â 
Â  Â  Â  Â  Â  Â  background-color: var(--bg-color);Â 
Â  Â  Â  Â  Â  Â  padding-bottom: 120px;Â 
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Header Section */
Â  Â  Â  Â  .header-cover {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
Â  Â  Â  Â  Â  Â  padding: 40px 20px 30px;Â 
Â  Â  Â  Â  Â  Â  border-radius: 0 0 35px 35px;
Â  Â  Â  Â  Â  Â  color: white;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(118, 75, 162, 0.2);Â 
Â  Â  Â  Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Member Badge */
Â  Â  Â  Â  .member-badge {
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.15);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  padding: 8px 15px;
Â  Â  Â  Â  Â  Â  display: inline-flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(255, 255, 255, 0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Product Cards */
Â  Â  Â  Â  .product-card {
Â  Â  Â  Â  Â  Â  border: none;Â 
Â  Â  Â  Â  Â  Â  border-radius: 20px;Â 
Â  Â  Â  Â  Â  Â  overflow: hidden;Â 
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 20px rgba(0,0,0,0.05);Â 
Â  Â  Â  Â  Â  Â  transition: all 0.3s;Â 
Â  Â  Â  Â  Â  Â  height: 100%;Â 
Â  Â  Â  Â  Â  Â  display: flex;Â 
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  }
Â  Â  Â  Â  .product-img {Â 
Â  Â  Â  Â  Â  Â  height: 160px;Â 
Â  Â  Â  Â  Â  Â  object-fit: cover;Â 
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  .product-card.out-of-stock { filter: grayscale(1); opacity: 0.8; }
Â  Â  Â  Â  .stock-badge {
Â  Â  Â  Â  Â  Â  position: absolute; top: 10px; right: 10px;Â 
Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.6);Â 
Â  Â  Â  Â  Â  Â  color: white; padding: 4px 12px; border-radius: 8px;Â 
Â  Â  Â  Â  Â  Â  font-size: 0.7rem; z-index: 10;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Category Scroll */
Â  Â  Â  Â  .category-scroll {Â 
Â  Â  Â  Â  Â  Â  display: flex; overflow-x: auto; white-space: nowrap;Â 
Â  Â  Â  Â  Â  Â  padding: 5px 20px 15px; scrollbar-width: none;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  .category-scroll::-webkit-scrollbar { display: none; }
Â  Â  Â  Â  .category-pill {
Â  Â  Â  Â  Â  Â  cursor: pointer; border-radius: 50px; padding: 8px 24px;Â 
Â  Â  Â  Â  Â  Â  background: white; border: 1px solid #eee; margin-right: 12px;Â 
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  .category-pill.active {
Â  Â  Â  Â  Â  Â  background: var(--secondary-color); color: white;Â 
Â  Â  Â  Â  Â  Â  border-color: var(--secondary-color); transform: translateY(-2px);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Cart Bar */
Â  Â  Â  Â  .cart-bar {
Â  Â  Â  Â  Â  Â  position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
Â  Â  Â  Â  Â  Â  width: 90%; max-width: 500px;Â 
Â  Â  Â  Â  Â  Â  background: #2d3436; color: white;
Â  Â  Â  Â  Â  Â  border-radius: 16px; padding: 15px 25px;Â 
Â  Â  Â  Â  Â  Â  display: flex; justify-content: space-between; align-items: center;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 15px 40px rgba(0,0,0,0.25);Â 
Â  Â  Â  Â  Â  Â  z-index: 1000; cursor: pointer; display: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Staff Dashboard */
Â  Â  Â  Â  .staff-btn-container { position: fixed; bottom: 100px; right: 20px; z-index: 999; }
Â  Â  Â  Â  .staff-dashboard-overlay {
Â  Â  Â  Â  Â  Â  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
Â  Â  Â  Â  Â  Â  background: #f4f6f9; z-index: 2000; overflow-y: auto; display: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .stat-highlight {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #00b09b, #96c93d);
Â  Â  Â  Â  Â  Â  color: white; border-radius: 16px; padding: 25px; margin-bottom: 25px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 20px rgba(0, 176, 155, 0.2);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- MAP STYLES --- */
Â  Â  Â  Â  #map {
Â  Â  Â  Â  Â  Â  height: 400px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .pac-container {
Â  Â  Â  Â  Â  Â  z-index: 10000 !important; /* Fix Google Autocomplete z-index */
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div class="header-cover text-center animate__animated animate__fadeIn">
Â  Â  Â  Â  <h2 class="fw-bold mb-1"><i class="fas fa-store me-2"></i>Mini Shop</h2>
Â  Â  Â  Â  <p class="mb-0 opacity-75 small">à¸­à¸²à¸«à¸²à¸£à¸­à¸£à¹ˆà¸­à¸¢ à¸ªà¸”à¹ƒà¸«à¸¡à¹ˆà¸—à¸¸à¸à¸§à¸±à¸™</p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="profile-info" class="d-none animate__animated animate__fadeInUp">
Â  Â  Â  Â  Â  Â  <div class="member-badge">
Â  Â  Â  Â  Â  Â  Â  Â  <img id="user-img" src="" class="rounded-circle border border-2 border-white me-3" width="45" height="45">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-start lh-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="user-name" class="fw-bold text-white small">Guest</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="user-points-display" class="text-warning small mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="spinner-border spinner-border-sm opacity-50"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="container">
Â  Â  Â  Â  <div class="category-scroll mb-4" id="category-container"></div>

Â  Â  Â  Â  <div class="row g-3" id="product-list">
Â  Â  Â  Â  Â  Â  <div class="col-12 text-center py-5">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="spinner-border text-primary"></div><br>à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="staff-entry" class="staff-btn-container d-none animate__animated animate__zoomIn">
Â  Â  Â  Â  <button class="btn btn-dark rounded-circle shadow-lg p-0 d-flex justify-content-center align-items-center"Â 
Â  Â  Â  Â  Â  Â  Â  Â  onclick="showStaffDashboard()" style="width: 60px; height: 60px;">
Â  Â  Â  Â  Â  Â  <i class="fas fa-chart-pie fa-lg text-white"></i>
Â  Â  Â  Â  </button>
Â  Â  </div>

Â  Â  <!-- STAFF DASHBOARD -->
Â  Â  <div id="staff-dashboard" class="staff-dashboard-overlay animate__animated animate__slideInUp">
Â  Â  Â  Â  <div class="bg-white p-3 sticky-top shadow-sm d-flex justify-content-between align-items-center">
Â  Â  Â  Â  Â  Â  <h5 class="mb-0 fw-bold"><i class="fas fa-cogs me-2"></i>Dashboard</h5>
Â  Â  Â  Â  Â  Â  <button class="btn btn-sm btn-light text-danger fw-bold" onclick="hideStaffDashboard()">
Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-times"></i> à¸›à¸´à¸”
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="container mt-4 pb-5">
Â  Â  Â  Â  Â  Â  <div id="owner-stats" class="stat-highlight">
Â  Â  Â  Â  Â  Â  Â  Â  <h5 class="fw-bold mb-4 opacity-75">à¸ªà¸£à¸¸à¸›à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸§à¸±à¸™à¸™à¸µà¹‰</h5>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="row text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="col-6 border-end border-white border-opacity-25">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <small class="d-block opacity-75 mb-1">à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸£à¸§à¸¡</small>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="fw-bold fs-3" id="stat-today">0</span> à¸¿
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="col-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <small class="d-block opacity-75 mb-1">à¸­à¸­à¹€à¸”à¸­à¸£à¹Œ</small>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="fw-bold fs-3" id="stat-orders">0</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="bg-white rounded-4 p-3 shadow-sm mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  <h6 class="fw-bold mb-3 text-muted">ğŸ† à¹€à¸¡à¸™à¸¹à¸‚à¸²à¸¢à¸”à¸µ Top 5</h6>
Â  Â  Â  Â  Â  Â  Â  Â  <ul id="stat-top-menu" class="list-unstyled mb-0 small ps-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="text-center text-muted py-3">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥...</li>
Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="d-flex justify-content-between align-items-center mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  <h6 class="fw-bold m-0 text-muted">à¸£à¸²à¸¢à¸à¸²à¸£à¸¥à¹ˆà¸²à¸ªà¸¸à¸”</h6>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-sm btn-outline-primary rounded-pill px-3" onclick="refreshDashboard()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-sync-alt me-1"></i> à¸£à¸µà¹€à¸Ÿà¸£à¸Š
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="admin-order-list"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="cart-bar animate__animated animate__fadeInUp" id="cart-bar" onclick="openCartModal()">
Â  Â  Â  Â  <div class="d-flex align-items-center">
Â  Â  Â  Â  Â  Â  <div class="bg-white text-dark rounded-circle d-flex justify-content-center align-items-center me-3 shadow-sm fw-bold"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â style="width: 36px; height: 36px;" id="total-qty">0</div>
Â  Â  Â  Â  Â  Â  <span class="fw-bold">à¸•à¸°à¸à¸£à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="fw-bold fs-5">
Â  Â  Â  Â  Â  Â  <span id="total-price">0</span> <small>à¸¿</small>Â 
Â  Â  Â  Â  Â  Â  <i class="fas fa-chevron-right ms-2 opacity-50"></i>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <!-- CART MODAL -->
Â  Â  <div class="modal fade" id="cartModal" tabindex="-1">
Â  Â  Â  Â  <div class="modal-dialog modal-dialog-centered">
Â  Â  Â  Â  Â  Â  <div class="modal-content border-0 shadow-lg rounded-4">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="modal-header border-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h5 class="modal-title fw-bold"><i class="fas fa-shopping-basket me-2"></i>à¸ªà¸£à¸¸à¸›à¸£à¸²à¸¢à¸à¸²à¸£</h5>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="modal-body p-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="cart-items" class="mb-4"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="d-flex justify-content-between align-items-center bg-light p-3 rounded-4 mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-muted fw-bold">à¸¢à¸­à¸”à¸ªà¸¸à¸—à¸˜à¸´</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="fs-4 fw-bold text-primary"><span id="modal-total">0</span> à¸¿</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form id="order-form">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="small text-muted mb-1">à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸£à¸±à¸š</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" class="form-control" id="form-name" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="small text-muted mb-1">à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel" class="form-control" id="form-tel" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Address Field with Map Button -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="small text-muted mb-1">à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸ˆà¸±à¸”à¸ªà¹ˆà¸‡</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea class="form-control" id="form-address" rows="2" required placeholder="à¸šà¹‰à¸²à¸™à¹€à¸¥à¸‚à¸—à¸µà¹ˆ, à¸‹à¸­à¸¢, à¸–à¸™à¸™..."></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-outline-secondary" type="button" onclick="openMapModal()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-map-marker-alt text-danger"></i><br><span style="font-size:0.8rem">à¸›à¸±à¸à¸«à¸¡à¸¸à¸”</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-text text-muted small ms-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-info-circle me-1"></i>à¸à¸”à¸›à¸¸à¹ˆà¸¡à¸›à¸±à¸à¸«à¸¡à¸¸à¸”à¹€à¸à¸·à¹ˆà¸­à¸£à¸°à¸šà¸¸à¸à¸´à¸à¸±à¸”à¹à¸¡à¹ˆà¸™à¸¢à¸³
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="small text-muted mb-1 fw-bold text-danger">* à¸«à¸¥à¸±à¸à¸à¸²à¸™à¸à¸²à¸£à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" class="form-control" id="form-slip" accept="image/*" required>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" id="btn-submit" class="btn btn-primary w-100 py-3 rounded-4 fw-bold shadow-sm mt-2" onclick="submitOrder()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-paper-plane me-2"></i>à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <!-- MAP MODAL (à¹€à¸à¸´à¹ˆà¸¡à¹ƒà¸«à¸¡à¹ˆ) -->
Â  Â  <div class="modal fade" id="mapModal" tabindex="-1">
Â  Â  Â  Â  <div class="modal-dialog modal-dialog-centered modal-lg">
Â  Â  Â  Â  Â  Â  <div class="modal-content rounded-4 border-0 shadow-lg">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="modal-header border-0 pb-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h5 class="modal-title fw-bold"><i class="fas fa-map-marked-alt me-2 text-primary"></i>à¹€à¸¥à¸·à¸­à¸à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡</h5>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="modal-body">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Search Box -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group mb-2 shadow-sm rounded-pill">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="input-group-text bg-white border-end-0 rounded-start-pill ps-3"><i class="fas fa-search text-muted"></i></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="map-search" class="form-control border-start-0 rounded-end-pill py-2" placeholder="à¸„à¹‰à¸™à¸«à¸² à¸«à¸¡à¸¹à¹ˆà¸šà¹‰à¸²à¸™, à¸­à¸²à¸„à¸²à¸£, à¸«à¸£[...]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Map Container -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="map" class="bg-light d-flex justify-content-center align-items-center text-muted">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="spinner-border text-secondary me-2"></div> à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¹à¸œà¸™à¸—à¸µà¹ˆ...
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mt-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <small class="text-danger fw-bold">* à¸¥à¸²à¸à¸«à¸¡à¸¸à¸”à¸ªà¸µà¹à¸”à¸‡ ğŸ“ à¹„à¸›à¸¢à¸±à¸‡à¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸ªà¸´à¸™à¸„à¹‰à¸²</small>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="modal-footer border-0 pt-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="btn btn-primary rounded-pill w-100 py-2 fw-bold" data-bs-dismiss="modal">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-check-circle me-1"></i> à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸™à¸µà¹‰
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
Â  Â  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

Â  Â  <script>
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  //Â  CONFIG: à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸£à¸°à¸šà¸š (à¸„à¹ˆà¸²à¹€à¸”à¸´à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“)
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  const CONFIG = {
Â  Â  liffId: "2008933274-cQhoTxw9",
Â  Â  scriptUrl: "https://script.google.com/macros/s/AKfycbzKGEIllWVMwLiI60gzOW_I7FpRnu7MGT8dsORN58q0LD0pPhOJSi5KiSZqesg-Z4i3/exec"
};

Â  Â  Â  Â  // Global Variables
Â  Â  Â  Â  let products = [];
Â  Â  Â  Â  let cart = {};
Â  Â  Â  Â  let userProfile = {};
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Maps Variables
Â  Â  Â  Â  let map, marker, geocoder, selectedCoords = null;
Â  Â  Â  Â  let isMapLoaded = false;

Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  //Â  INITIALIZATION
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  window.onload = async () => {
Â  Â  Â  Â  Â  Â  await initLiff();
Â  Â  Â  Â  Â  Â  await fetchProducts();
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- CORE API HANDLER (Universal Fetch) ---
Â  Â  Â  Â  async function fetchAPI(action, params = {}) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const url = new URL(CONFIG.EXEC_URL);
Â  Â  Â  Â  Â  Â  Â  Â  url.searchParams.append("action", action);
Â  Â  Â  Â  Â  Â  Â  Â  Object.keys(params).forEach(key => url.searchParams.append(key, params[key]));
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(url);
Â  Â  Â  Â  Â  Â  Â  Â  return await response.json();
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("API GET Error:", error);
Â  Â  Â  Â  Â  Â  Â  Â  return null;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function postAPI(payload) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(CONFIG.EXEC_URL, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(payload)
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  return await response.json();
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("API POST Error:", error);
Â  Â  Â  Â  Â  Â  Â  Â  throw error;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  //Â  GOOGLE MAPS LOGIC
Â  Â  Â  Â  // ==========================================
Â  Â  Â  Â  async function openMapModal() {
Â  Â  Â  Â  Â  Â  const modal = new bootstrap.Modal(document.getElementById('mapModal'));
Â  Â  Â  Â  Â  Â  modal.show();

Â  Â  Â  Â  Â  Â  if (!isMapLoaded) {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // à¸”à¸¶à¸‡ Key à¸ˆà¸²à¸ Backend
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const res = await fetchAPI("getMapsKey");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!res || !res.key) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('map').innerHTML = 'âš ï¸ à¹„à¸¡à¹ˆà¸à¸š API Key<br>à¸à¸£à¸¸à¸“à¸²à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Script Property: MAPS_API_KEY';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // à¸ªà¸£à¹‰à¸²à¸‡ Script Tag à¹à¸šà¸š Dynamic
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const script = document.createElement('script');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  script.src = `https://maps.googleapis.com/maps/api/js?key=${res.key}&libraries=places&callback=initMap`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  script.async = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  script.defer = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.head.appendChild(script);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isMapLoaded = true;
Â  Â  Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(e);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('map').innerHTML = 'à¹‚à¸«à¸¥à¸”à¹à¸œà¸™à¸—à¸µà¹ˆà¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Callback à¹€à¸¡à¸·à¹ˆà¸­ Google Maps à¹‚à¸«à¸¥à¸”à¹€à¸ªà¸£à¹‡à¸ˆ
Â  Â  Â  Â  window.initMap = function() {
Â  Â  Â  Â  Â  Â  // à¸à¸´à¸à¸±à¸”à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ (à¸à¸£à¸¸à¸‡à¹€à¸—à¸à¸¯)
Â  Â  Â  Â  Â  Â  const defaultLocation = { lat: 13.7563, lng: 100.5018 };

Â  Â  Â  Â  Â  Â  map = new google.maps.Map(document.getElementById("map"), {
Â  Â  Â  Â  Â  Â  Â  Â  center: defaultLocation,
Â  Â  Â  Â  Â  Â  Â  Â  zoom: 15,
Â  Â  Â  Â  Â  Â  Â  Â  mapTypeControl: false,
Â  Â  Â  Â  Â  Â  Â  Â  streetViewControl: false,
Â  Â  Â  Â  Â  Â  Â  Â  fullscreenControl: false
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  geocoder = new google.maps.Geocoder();

Â  Â  Â  Â  Â  Â  marker = new google.maps.Marker({
Â  Â  Â  Â  Â  Â  Â  Â  position: defaultLocation,
Â  Â  Â  Â  Â  Â  Â  Â  map: map,
Â  Â  Â  Â  Â  Â  Â  Â  draggable: true,
Â  Â  Â  Â  Â  Â  Â  Â  animation: google.maps.Animation.DROP
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Event: à¸¥à¸²à¸à¸«à¸¡à¸¸à¸”
Â  Â  Â  Â  Â  Â  marker.addListener("dragend", () => {
Â  Â  Â  Â  Â  Â  Â  Â  geocodePosition(marker.getPosition());
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Event: à¸„à¸¥à¸´à¸à¸šà¸™à¹à¸œà¸™à¸—à¸µà¹ˆ
Â  Â  Â  Â  Â  Â  map.addListener("click", (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  marker.setPosition(e.latLng);
Â  Â  Â  Â  Â  Â  Â  Â  geocodePosition(e.latLng);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  initSearchBox();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // à¸‚à¸­à¸à¸´à¸à¸±à¸”à¸›à¸±à¸ˆà¸¸à¸šà¸±à¸™ (à¸–à¹‰à¸²à¸—à¸³à¹„à¸”à¹‰)
Â  Â  Â  Â  Â  Â  if (navigator.geolocation) {
Â  Â  Â  Â  Â  Â  Â  Â  navigator.geolocation.getCurrentPosition(
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (position) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pos = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lat: position.coords.latitude,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lng: position.coords.longitude,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  map.setCenter(pos);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  marker.setPosition(pos);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  geocodePosition(pos);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  () => { console.log("Geolocation permission denied"); }
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // à¸£à¸°à¸šà¸šà¸„à¹‰à¸™à¸«à¸² (Autocomplete)
Â  Â  Â  Â  function initSearchBox() {
Â  Â  Â  Â  Â  Â  const input = document.getElementById("map-search");
Â  Â  Â  Â  Â  Â  const searchBox = new google.maps.places.SearchBox(input);

Â  Â  Â  Â  Â  Â  map.addListener("bounds_changed", () => {
Â  Â  Â  Â  Â  Â  Â  Â  searchBox.setBounds(map.getBounds());
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  searchBox.addListener("places_changed", () => {
Â  Â  Â  Â  Â  Â  Â  Â  const places = searchBox.getPlaces();
Â  Â  Â  Â  Â  Â  Â  Â  if (places.length == 0) return;

Â  Â  Â  Â  Â  Â  Â  Â  const place = places[0];
Â  Â  Â  Â  Â  Â  Â  Â  if (!place.geometry || !place.geometry.location) return;

Â  Â  Â  Â  Â  Â  Â  Â  if (place.geometry.viewport) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  map.fitBounds(place.geometry.viewport);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  map.setCenter(place.geometry.location);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  map.setZoom(17);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  marker.setPosition(place.geometry.location);
Â  Â  Â  Â  Â  Â  Â  Â  geocodePosition(place.geometry.location);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // à¹à¸›à¸¥à¸‡à¸à¸´à¸à¸±à¸” -> à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ
Â  Â  Â  Â  function geocodePosition(pos) {
Â  Â  Â  Â  Â  Â  // support both google.maps.LatLng and plain {lat, lng} objects
Â  Â  Â  Â  Â  Â  const lat = (typeof pos.lat === 'function') ? pos.lat() : pos.lat;
Â  Â  Â  Â  Â  Â  const lng = (typeof pos.lng === 'function') ? pos.lng() : pos.lng;
Â  Â  Â  Â  Â  Â  selectedCoords = { lat, lng };

Â  Â  Â  Â  Â  Â  geocoder.geocode({ location: pos }, (results, status) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (status === "OK") {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (results[0]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const address = results[0].formatted_address;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // à¹ƒà¸ªà¹ˆà¸„à¹ˆà¸²à¸¥à¸‡à¹ƒà¸™à¸Ÿà¸­à¸£à¹Œà¸¡à¹à¸¥à¸°à¸Šà¹ˆà¸­à¸‡à¸„à¹‰à¸™à¸«à¸²
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('form-address').value = address;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('map-search').value = address;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²à¹à¸œà¸™à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡à¹„à¸¡à¹ˆà¹€à¸•à¹‡à¸¡à¹ƒà¸™ Modal
Â  Â  Â  Â  const mapModalEl = document.getElementById('mapModal');
Â  Â  Â  Â  mapModalEl.addEventListener('shown.bs.modal', event => {
Â  Â  Â  Â  Â  Â  if(map) {
Â  Â  Â  Â  Â  Â  Â  Â  google.maps.event.trigger(map, "resize");
Â  Â  Â  Â  Â  Â  Â  Â  map.setCenter(marker.getPosition());
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // --- LIFF & MEMBER SYSTEM ---
Â  Â  Â  Â  async function initLiff() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await liff.init({ liffId: CONFIG.LIFF_ID });
Â  Â  Â  Â  Â  Â  Â  Â  if (liff.isLoggedIn()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const profile = await liff.getProfile();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfile = profile;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('user-img').src = profile.pictureUrl;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('user-name').innerText = profile.displayName;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('profile-info').classList.remove('d-none');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('form-name').value = profile.displayName; // Auto-Fill

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Update UI in parallel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateMemberUI(profile.userId, profile.displayName);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checkStaffAccess(profile.userId);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  liff.login();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (err) { console.error('LIFF Error:', err); }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function updateMemberUI(uid, name) {
Â  Â  Â  Â  Â  Â  const member = await fetchAPI("getMember", { uid: uid, name: name });
Â  Â  Â  Â  Â  Â  if (member && member.points !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  let rankIcon = member.rank === 'VIP' ? 'â­' : (member.rank === 'Super VIP' ? 'ğŸ‘‘' : 'ğŸª™');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('user-points-display').innerHTML =Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `${rankIcon} ${member.rank} | <b>${member.points}</b> à¹à¸•à¹‰à¸¡`;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('user-points-display').innerHTML = "à¹€à¸£à¸´à¹ˆà¸¡à¸ªà¸°à¸ªà¸¡à¹à¸•à¹‰à¸¡à¸à¸±à¸™à¹€à¸–à¸­à¸°!";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function checkStaffAccess(uid) {
Â  Â  Â  Â  Â  Â  const res = await fetchAPI("checkStaff", { uid: uid });
Â  Â  Â  Â  Â  Â  if (res && res.isStaff) document.getElementById('staff-entry').classList.remove('d-none');
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- PRODUCT & CART SYSTEM ---
Â  Â  Â  Â  async function fetchProducts() {
Â  Â  Â  Â  Â  Â  const data = await fetchAPI("getProducts");
Â  Â  Â  Â  Â  Â  if (data) {
Â  Â  Â  Â  Â  Â  Â  Â  products = data.map(item => ({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: item.name || item['Menu'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  price: parseFloat(item.price || item['Price']),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  category: item.category || item['Category'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img: item.img || item['Image'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inStock: String(item.InStock).toLowerCase() === 'true'
Â  Â  Â  Â  Â  Â  Â  Â  })).filter(i => i.name && !isNaN(i.price));
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  renderCategories();
Â  Â  Â  Â  Â  Â  Â  Â  renderProducts(products);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderCategories() {
Â  Â  Â  Â  Â  Â  const categories = [...new Set(products.map(p => p.category))].filter(Boolean);
Â  Â  Â  Â  Â  Â  const container = document.getElementById('category-container');
Â  Â  Â  Â  Â  Â  let html = '<span class="category-pill active" onclick="filterProduct('all', event)">à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</span>';
Â  Â  Â  Â  Â  Â  categories.forEach(cat => { html += `<span class="category-pill" onclick="filterProduct('${cat}', event)">${cat}</span>`; });
Â  Â  Â  Â  Â  Â  container.innerHTML = html;
Â  Â  Â  Â  }

Â  Â  Â  Â  function filterProduct(cat, event) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.category-pill').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  event.target.classList.add('active');
Â  Â  Â  Â  Â  Â  const filtered = (cat === 'all') ? products : products.filter(p => p.category === cat);
Â  Â  Â  Â  Â  Â  renderProducts(filtered);
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderProducts(list) {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('product-list');
Â  Â  Â  Â  Â  Â  if (list.length === 0) { container.innerHTML = '<div class="col-12 text-center py-5 text-muted">à¹„à¸¡à¹ˆà¸à¸šà¸ªà¸´à¸™à¸„à¹‰à¸²</div>'; return; }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  container.innerHTML = list.map(p => {
Â  Â  Â  Â  Â  Â  Â  Â  const isAvail = p.inStock;
Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="col-6 col-md-4 col-lg-3 animate__animated animate__fadeIn">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="product-card ${!isAvail ? 'out-of-stock' : ''}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${!isAvail ? '<div class="stock-badge">à¸«à¸¡à¸”</div>' : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${p.img}" class="product-img" loading="lazy" onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="p-3 d-flex flex-column flex-grow-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h6 class="fw-bold text-truncate" style="font-size:0.95rem;">${p.name}</h6>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-primary fw-bold mb-2">${p.price.toLocaleString()} à¸¿</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-sm ${isAvail ? 'btn-outline-primary' : 'btn-secondary'} w-100 rounded-pill mt-auto fw-bold"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onclick="addToCart('${p.name}')" ${!isAvail ? 'disabled' : ''}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${isAvail ? '<i class="fas fa-plus me-1"></i> à¹€à¸à¸´à¹ˆà¸¡' : 'à¸«à¸¡à¸”'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  }).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  function addToCart(name) {
Â  Â  Â  Â  Â  Â  const p = products.find(x => x.name === name);
Â  Â  Â  Â  Â  Â  if(cart[name]) cart[name].qty++; else cart[name] = {...p, qty: 1};
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Visual Feedback
Â  Â  Â  Â  Â  Â  const btn = event.target.closest('button');
Â  Â  Â  Â  Â  Â  const originalHTML = btn.innerHTML;
Â  Â  Â  Â  Â  Â  btn.innerHTML = '<i class="fas fa-check"></i>';
Â  Â  Â  Â  Â  Â  btn.classList.replace('btn-outline-primary', 'btn-primary');
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = originalHTML;
Â  Â  Â  Â  Â  Â  Â  Â  btn.classList.replace('btn-primary', 'btn-outline-primary');
Â  Â  Â  Â  Â  Â  }, 500);

Â  Â  Â  Â  Â  Â  updateCartUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateCartUI() {
Â  Â  Â  Â  Â  Â  const items = Object.values(cart);
Â  Â  Â  Â  Â  Â  const qty = items.reduce((s, i) => s + i.qty, 0);
Â  Â  Â  Â  Â  Â  const total = items.reduce((s, i) => s + (i.price * i.qty), 0);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('total-qty').innerText = qty;
Â  Â  Â  Â  Â  Â  document.getElementById('total-price').innerText = total.toLocaleString();
Â  Â  Â  Â  Â  Â  document.getElementById('modal-total').innerText = total.toLocaleString();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const bar = document.getElementById('cart-bar');
Â  Â  Â  Â  Â  Â  if (qty > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  bar.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  bar.classList.add('animate__fadeInUp');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  bar.style.display = 'none';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function openCartModal() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('cart-items');
Â  Â  Â  Â  Â  Â  const items = Object.values(cart);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (items.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<p class="text-center text-muted py-3">à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸™à¸•à¸°à¸à¸£à¹‰à¸²</p>';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = items.map(i => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="d-flex justify-content-between align-items-center mb-3 border-bottom pb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="d-flex align-items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${i.img}" width="50" height="50" class="rounded shadow-sm me-3" style="object-fit:cover;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="fw-bold small text-dark">${i.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-muted small">${i.price} à¸¿</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-light rounded-pill px-2 py-1 border d-flex align-items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-minus p-2 text-secondary" style="cursor:pointer" onclick="changeQty('${i.name}', -1)"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="mx-2 fw-bold small">${i.qty}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-plus p-2 text-primary" style="cursor:pointer" onclick="changeQty('${i.name}', 1)"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`).join('');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  new bootstrap.Modal(document.getElementById('cartModal')).show();
Â  Â  Â  Â  }

Â  Â  Â  Â  function changeQty(name, delta) {
Â  Â  Â  Â  Â  Â  if (cart[name]) { cart[name].qty += delta; if (cart[name].qty <= 0) delete cart[name]; updateCartUI(); openCartModal(); }
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- SUBMIT ORDER (Full Logic) ---
Â  Â  Â  Â  async function submitOrder() {
Â  Â  Â  Â  Â  Â  const name = document.getElementById('form-name').value;
Â  Â  Â  Â  Â  Â  const tel = document.getElementById('form-tel').value;
Â  Â  Â  Â  Â  Â  const address = document.getElementById('form-address').value;
Â  Â  Â  Â  Â  Â  const fileInput = document.getElementById('form-slip');

Â  Â  Â  Â  Â  Â  if (!name || !tel || !address || fileInput.files.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  return Swal.fire('à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸„à¸£à¸š', 'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¹‰à¸„à¸£à¸šà¹à¸¥à¸°à¹à¸™à¸šà¸ªà¸¥à¸´à¸›', 'warning');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const btn = document.getElementById('btn-submit');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // UI Loading
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span> à¸à¸³à¸¥à¸±à¸‡à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥...';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Swal.fire({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title: 'à¸à¸³à¸¥à¸±à¸‡à¸ªà¹ˆà¸‡à¸­à¸­à¹€à¸”à¸­à¸£à¹Œ',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html: 'à¸£à¸°à¸šà¸šà¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸‡à¸²à¸™...<br>à¸à¸£à¸¸à¸“à¸²à¸£à¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ à¸«à¹‰à¸²à¸¡à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¸ˆà¸­',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  allowOutsideClick: false,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  didOpen: () => Swal.showLoading()
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  // Compress & Send
Â  Â  Â  Â  Â  Â  Â  Â  const compressed = await compressImage(fileInput.files[0]);
Â  Â  Â  Â  Â  Â  Â  Â  const itemsText = Object.values(cart).map(i => `${i.name} (x${i.qty})`).join(', ');

Â  Â  Â  Â  Â  Â  Â  Â  const result = await postAPI({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  action: "submitOrder",
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  uid: userProfile.userId || 'guest',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  phone: tel,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  address: address,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  items: itemsText,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  total: document.getElementById('modal-total').innerText,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  image: compressed,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mimeType: 'image/jpeg',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  coords: selectedCoords ? `${selectedCoords.lat},${selectedCoords.lng}` : ''
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  if (result.result === "Success") {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Refresh Points
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (userProfile.userId) updateMemberUI(userProfile.userId, userProfile.displayName);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await Swal.fire({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  icon: 'success',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title: 'à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text: 'à¸—à¸²à¸‡à¸£à¹‰à¸²à¸™à¹„à¸”à¹‰à¸£à¸±à¸šà¸­à¸­à¹€à¸”à¸­à¸£à¹Œà¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmButtonText: 'à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¸•à¹ˆà¸²à¸‡'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  liff.closeWindow();
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(result.message || "Unknown Error");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error(e);
Â  Â  Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = '<i class="fas fa-paper-plane me-2"></i>à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­';
Â  Â  Â  Â  Â  Â  Â  Â  Swal.fire('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”', 'à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ' + e.message, 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function compressImage(file) {
Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {
Â  Â  Â  Â  Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  Â  Â  Â  Â  reader.readAsDataURL(file);
Â  Â  Â  Â  Â  Â  Â  Â  reader.onload = (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const img = new Image();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.src = e.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  img.onload = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const canvas = document.createElement('canvas');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const w = Math.min(800, img.width);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const h = img.height * (w / img.width);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  canvas.width = w; canvas.height = h;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.drawImage(img, 0, 0, w, h);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(canvas.toDataURL('image/jpeg', 0.7).split(',')[1]);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- DASHBOARD HELPERS ---
Â  Â  Â  Â  function showStaffDashboard() { document.getElementById('staff-dashboard').style.display = 'block'; refreshDashboard(); }
Â  Â  Â  Â  function hideStaffDashboard() { document.getElementById('staff-dashboard').style.display = 'none'; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  async function refreshDashboard() {
Â  Â  Â  Â  Â  Â  const stats = await fetchAPI("getOwnerStats");
Â  Â  Â  Â  Â  Â  if (stats) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('stat-today').innerText = stats.todaySales.toLocaleString();
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('stat-orders').innerText = stats.totalOrders.toLocaleString();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const list = document.getElementById('stat-top-menu');
Â  Â  Â  Â  Â  Â  Â  Â  if (stats.topMenus.length === 0) list.innerHTML = '<li class="text-center text-muted py-2">à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥</li>';
Â  Â  Â  Â  Â  Â  Â  Â  else list.innerHTML = stats.topMenus.map((item, i) => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li class="d-flex justify-content-between border-bottom py-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span><span class="badge bg-secondary me-2">${i+1}</span>${item.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="fw-bold text-success">${item.count}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </li>`).join('');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const orders = await fetchAPI("getAdminOrders");
Â  Â  Â  Â  Â  Â  const container = document.getElementById('admin-order-list');
Â  Â  Â  Â  Â  Â  if (orders) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = orders.map(o => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white p-3 rounded-3 shadow-sm mb-3 border-start border-4 border-primary">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="d-flex justify-content-between mb-2"><span class="badge bg-info text-dark">${o['Status']}</span><small class="text-muted">${o['Timestamp']}</small></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h6 class="fw-bold mb-1">${o['Name']} (${o['Total']}à¸¿)</h6>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="small text-muted mb-2">${o['Items']}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="d-flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-sm btn-outline-primary flex-grow-1" onclick="viewSlip('${o['SlipURL']}')">à¸”à¸¹à¸ªà¸¥à¸´à¸›</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-sm btn-dark flex-grow-1" onclick="updateStatus('${o['Order ID']}')">à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`).join('');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  async function updateStatus(orderId) {
Â  Â  Â  Â  Â  Â  const { value: status } = await Swal.fire({
Â  Â  Â  Â  Â  Â  Â  Â  title: 'à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸–à¸²à¸™à¸°', input: 'select',
Â  Â  Â  Â  Â  Â  Â  Â  inputOptions: { 'à¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸­à¸²à¸«à¸²à¸£': 'à¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸­à¸²à¸«à¸²à¸£', 'à¸à¸³à¸¥à¸±à¸‡à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡': 'à¸à¸³à¸¥à¸±à¸‡à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡', 'à¹€à¸ªï¿½ï¿½[...]'
Â  Â  Â  Â  Â  Â  Â  Â  ,
Â  Â  Â  Â  Â  Â  Â  Â  showCancelButton: true
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (status) {
Â  Â  Â  Â  Â  Â  Â  Â  Swal.showLoading();
Â  Â  Â  Â  Â  Â  Â  Â  await postAPI({ action: "updateStatus", orderId: orderId, newStatus: status });
Â  Â  Â  Â  Â  Â  Â  Â  Swal.fire('à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢', '', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  refreshDashboard();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  function viewSlip(url) {Â 
Â  Â  Â  Â  Â  Â  if(!url || url === "undefined") return Swal.fire('à¹„à¸¡à¹ˆà¸à¸šà¸ªà¸¥à¸´à¸›', '', 'info');
Â  Â  Â  Â  Â  Â  Swal.fire({ imageUrl: url, imageAlt: 'Slip', showCloseButton: true, showConfirmButton: false, width: '90%' });Â 
Â  Â  Â  Â  }

Â  Â  </script>
</body>
</html>
