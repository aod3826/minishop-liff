# üõí Mini Shop - LIFF & Google Apps Script System

‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô LINE LIFF ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Google Sheets ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÅ‡∏•‡∏∞ Google Apps Script (GAS) ‡πÄ‡∏õ‡πá‡∏ô Backend API

## ü§ñ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤ (For AI Developers)
‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ 3 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å:
1. **Frontend**: `index.html` (‡πÇ‡∏Æ‡∏™‡∏ï‡πå‡∏ö‡∏ô GitHub Pages) ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö LINE LIFF SDK
2. **Backend**: `Code.gs` (Google Apps Script) ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô API (JSON)
3. **Database**: Google Sheets (3 Sheets ‡∏´‡∏•‡∏±‡∏Å: Menu, Orders, Members)

### üìä ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Google Sheets Structure)
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏∂‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:

1. **Sheet: `Menu`** (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)
   - A: `Menu` (‡∏ä‡∏∑‡πà‡∏≠), B: `Price` (‡∏£‡∏≤‡∏Ñ‡∏≤), C: `Category`, D: `Image` (URL), E: `InStock` (Boolean)

2. **Sheet: `Orders`** (‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠)
   - A: `Timestamp`, B: `Name`, C: `Phone`, D: `Address`, E: `Items`, F: `Total`, G: `SlipURL`, H: `UID`, I: `Order ID`, J: `Status`, K: `Coordinates`

3. **Sheet: `Members`** (‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å)
   - A: `UID`, B: `Name`, C: `Points`, D: `LastUpdated`, E: `TotalSpent`

### ‚öôÔ∏è ‡∏£‡∏∞‡∏ö‡∏ö Backend API (Code.gs Logic)
‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `doGet` ‡πÅ‡∏•‡∏∞ `doPost` ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö REST API:
- **`doGet(e)`**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö action: `getProducts` (Default), `getMember`, `getOwnerStats`, `getAdminOrders`, `checkStaff`, `getMapsKey`
- **`doPost(e)`**: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö action:
    - `submitOrder`: ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON (‡∏£‡∏ß‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û Base64) -> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Sheet `Orders` -> ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÑ‡∏õ Google Drive -> ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å -> ‡∏™‡πà‡∏á LINE Flex Message ‡πÅ‡∏à‡πâ‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
    - `updateStatus`: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏ô Sheet ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô LINE

### üõ†Ô∏è ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Environment Variables)
*‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Script Properties ‡∏Ç‡∏≠‡∏á GAS:*
- `LINE_ACCESS_TOKEN`: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Messaging API
- `DRIVE_FOLDER_ID`: ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
- `MAPS_API_KEY`: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà
- `STAFF_UIDS`: Array ‡∏Ç‡∏≠‡∏á LINE User ID ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Admin (‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô Code.gs)

### üîó ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Frontend ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö Backend
‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `index.html` ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô `CONFIG`:
```javascript
const CONFIG = {
    liffId: 'YOUR_LIFF_ID',
    scriptUrl: 'YOUR_GAS_WEB_APP_URL'
};
